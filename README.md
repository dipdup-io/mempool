# Mempool indexer

[![Tests](https://github.com/dipdup-net/mempool/workflows/Tests/badge.svg?)](https://github.com/dipdup-net/mempool/actions?query=workflow%3ATests)
[![Docker images](https://github.com/dipdup-net/mempool/workflows/Release/badge.svg?)](https://hub.docker.com/r/dipdup/mempool)
[![Made With](https://img.shields.io/badge/made%20with-dipdup-blue.svg?)](https://dipdup.net)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

Selective Tezos mempool indexer based on DipDup framework.

## Configuration

Fully compatible with DipDup YAML configuration file format.  
Mempool indexer reuses `datasources`, `contracts`, `database`, `hasura` sections, and reads its own settings from `mempool` top-level section.  

Read more [in the docs](https://docs.dipdup.net/config-file-reference/plugins/mempool).

## GQL Client

Autogenerated typed Mempool SDK with a built-in GQL client.

### Installation

```
npm i @dipdup/mempool
```

### Usage

First of all you need to create an instance of mempool client:
```js
import { createClient } from '@dipdup/mempool'

const client = createClient({
    url: 'https://api.dipdup.net/mempool/graphql',
    subscription: {
        url: "wss://api.dipdup.net/mempool/graphql"
    }
});
```

#### Query

```js
import { everything } from '@dipdup/mempool'

client.chain.query
    .transaction({
        where: { 
            destination: { _eq: 'KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton' }
        },
        limit: 10
    })
    .get({ ...everything })
    .then(txs => console.log)
```

#### Subscription (live query)

```js
import { everything } from '@dipdup/mempool'

const { unsubscribe } = client.chain.subscription
    .transaction({
        where: { 
            destination: { _eq: 'KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton' }
        }
    })
    .get({ ...everything })
    .subscribe({
        next: (tx) => console.log(tx),
    })
```